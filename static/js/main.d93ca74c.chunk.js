(this["webpackJsonpreact-boleto-reader-example"]=this["webpackJsonpreact-boleto-reader-example"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);n(3);var a=n(0),o=n.n(a),i=n(4),r=n.n(i),c=n(6),d=n(2),l=n(1),u=n(5);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var b="_1WWFP",m="_NQqIE",v="_3P2z6",p="_3zAgT",f="_1aS6C",h="_rgsT9";function g(e){var t=e.id,n=void 0===t?"react-boleto-reader--barcode":t,i=e.init,r=void 0===i?{}:i,c=e.inputStream,d=void 0===c?{}:c,u=e.decoder,b=void 0===u?{}:u,g=e.readers,w=void 0===g?[{format:"ean_reader",config:{}},{format:"code_128_reader",config:{}}]:g,E=e.height,O=void 0===E?window.innerHeight:E,j=e.canvasWidth,x=void 0===j?1280:j,y=e.canvasHeight,C=void 0===y?720:y,_=e.aspectRatio,S=void 0===_?{min:0,max:1}:_,k=e.onInit,L=void 0===k?function(){}:k,W=e.onError,D=void 0===W?function(){}:W,N=e.onDetected,H=void 0===N?function(){}:N,I=e.onCancel,T=void 0===I?function(){}:I,z=e.onProcessed,V=void 0===z?function(){}:z,P=e.svgDetectingBoxesCoords,R=void 0===P?{x:0,y:1}:P,B=e.svgDetectingBoxes,A=void 0===B?{color:"rgba(255, 0, 0, .25)",lineWidth:2}:B,M=e.svgDetectingBox,q=void 0===M?{color:"transparent",lineWidth:2}:M,J=e.svgDetectingLine,F=void 0===J?{color:"rgb(255, 0, 0, .8)",lineWidth:4}:J,U=e.textHeader,Q=void 0===U?"Com boa ilumina\xe7\xe3o, posicione o c\xf3digo de barras na \xe1rea delimitada:":U,G=e.textCancel,K=void 0===G?"Cancelar":G,X=Object(a.useState)(window.innerWidth),Y=X[0],Z=X[1],$=Object(a.useState)(null),ee=$[0],te=$[1],ne=Object(a.useState)(!0),ae=ne[0],oe=ne[1],ie=parseInt(O,10),re=ie/2,ce=C/2,de=ce-parseInt(O,10)/2,le=ie>C?re-ce+"px":"-"+(de-40)+"px",ue=Object(a.useCallback)((function(){try{Object(l.init)(s({inputStream:s({type:"LiveStream",target:"#"+n,constraints:{width:x,height:C,facingMode:"environment",aspectRatio:S}},d),frequency:5,singleChannel:!0,locate:!0,locator:{patchSize:"medium",halfSample:!0}},r,{decoder:s({readers:w},b)}),(function(e){if(e)return D(e),void console.error(e);Object(l.start)(),L()})),Object(l.onDetected)((function(e){var t=(e||{}).codeResult.code;H(e,t)})),Object(l.onProcessed)((function(e){if(V(e),(!!A||q||F)&&e&&"object"===typeof e){var t=l.canvas.ctx.overlay,n=l.canvas.dom.overlay,a=e.box,o=e.boxes,i=e.codeResult,r=e.line,c=(i||{}).code;o&&A&&(t.clearRect(0,0,parseInt(n.getAttribute("width")),parseInt(n.getAttribute("height"))),o.filter((function(e){return e!==a})).forEach((function(e){l.ImageDebug.drawPath(e,R,t,A)}))),a&&q&&l.ImageDebug.drawPath(a,{x:0,y:1},t,q),c&&F&&l.ImageDebug.drawPath(r,{x:"x",y:"y"},t,F)}}))}catch(e){D(e)}}),[L,H,V,D]),se=Object(a.useCallback)((function(){try{document.querySelector("video").srcObject.getTracks().forEach((function(e){return e.stop()}))}catch(e){console.error("BoletoBarcodeReader could not stop the camera")}})),be=Object(a.useCallback)((function(){Object(l.offDetected)(),Object(l.offProcessed)(),Object(l.stop)(),se()}),[]),me=Object(a.useCallback)((function(){clearTimeout(ee),Y!==window.innerWidth&&(be(),te(setTimeout((function(){ue(),Z(window.innerWidth)}),1500)))}),[ue,be,Y]),ve=Object(a.useCallback)((function(){T(),Object(l.stop)(),setTimeout((function(){return oe(!1)}),2e3)}),[T,be,ue]);return Object(a.useLayoutEffect)((function(){return ue(),window.addEventListener("resize",me),function(){window.removeEventListener("resize",me)}}),[ue,me]),ae?o.a.createElement("div",{id:n,className:v,style:{"--rbr-canvas-top":le,"--rbr-height":O,height:O}},o.a.createElement("div",{className:p},o.a.createElement("div",{className:f},o.a.createElement("small",null,Q)),o.a.createElement("div",{className:h},o.a.createElement("hr",null)),o.a.createElement("div",{className:f},o.a.createElement("button",{type:"button",className:m+" rbr__btn",onClick:ve},K)))):null}var w={supported:!0,textLandscape:" Largura de tela insuficiente. <br/><br/> Coloque o dispositivo em posi\xe7\xe3o horizontal ou maximize a janela. <br/><br/> Se ainda assim n\xe3o funcionar, utilize outro dispositivo com resolu\xe7\xe3o superior a #minWidth. <br/><br/> Esta janela atualmente tem largura de #wWidth.",textNotSupported:" Aparentemente este dispositivo n\xe3o tem suporte a c\xe2mera ou o uso dela foi negado, <br /> o qu\xea impossibilita a leitura de c\xf3digos de barras. ",textValidating:" Buscando por dispositivo de v\xeddeo... ",validating:!0,windowHeight:window.innerHeight,windowWidth:window.innerWidth},E=Object(a.createContext)(w);function O(e,t){void 0===e&&(e=w),void 0===t&&(t={});var n=t,a=n.type,o=n.content;switch(a){case"set":return s({},e,o||{});default:return e}}function j(){return Object(a.useContext)(E)}function x(e){var t=e.children,n=e.height,a=e.minWidth,i=void 0===a?640:a,r=e.onCancel,c=e.textLandscape,d=j(),l=d.windowWidth,u=d.textLandscape;return l<i?o.a.createElement("div",{className:b,style:{"--rbr-height":n}},o.a.createElement("div",{dangerouslySetInnerHTML:{__html:String(c||u).replace("#minWidth",i+" pixels").replace("#wWidth",l+" pixels")}}),r&&o.a.createElement("button",{type:"button",style:{marginTop:"40px"},className:m,onClick:r},"Cancelar")):t}function y(){return void 0===(e="videoinput")&&(e=""),new Promise((function(t,n){try{if(!e||!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return void n();navigator.mediaDevices.enumerateDevices().catch(n).then((function(a){var o=a.filter((function(t){return t.kind===e})).pop()||null;o?t(o):n()}))}catch(a){n(a)}}));var e}function C(e){var t=e.id,n=void 0===t?"react-boleto-reader":t,i=e.readers,r=void 0===i?["i2of5_reader"]:i,c=e.height,d=e.minWidth,l=void 0===d?640:d,b=e.aspectRatio,m=void 0===b?{min:1,max:2}:b,v=e.onDetected,p=void 0===v?function(){}:v,f=e.onCancel,h=e.landscape,w=void 0===h||h,E=e.textLandscape,O=void 0===E?"":E,j=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["id","readers","height","minWidth","aspectRatio","onDetected","onCancel","landscape","textLandscape"]),y=w?x:Fragment,C=w?{height:c,minWidth:l,onCancel:f,textLandscape:O}:{},_=Object(a.useCallback)((function(e,t){var n=function(e){var t=new u.a(String(e));return t&&t.valid()?s({},t.toJSON(),{barcodeTyped:e}):null}(t);n&&p(n,t,e)}),[]);return o.a.createElement(y,C,o.a.createElement(g,s({id:n,height:c||wHeight,readers:r,aspectRatio:m,onCancel:f,onDetected:_},j)))}function _(e){var t=e.children,n=j(),i=n.setter,r=n.onValidate,c=n.validating,d=n.supported,l=n.textNotSupported,u=n.textValidating;return Object(a.useEffect)((function(){i({supported:null,validating:!0}),y().then((function(e){i({supported:e||null,validating:!1}),r(e||null)})).catch((function(e){i({supported:null,validating:!0}),r(null,e),console.error(e)}))}),[]),!c&&d?t:o.a.createElement("div",{id:"rbr_support",className:b},c&&o.a.createElement("div",{id:"rbr_support_validating",dangerouslySetInnerHTML:{__html:u}}),!d&&o.a.createElement("div",{id:"rbr_support_not_supported",dangerouslySetInnerHTML:{__html:l}}))}var S={set:function(e){return void 0===e&&(e={}),{type:"set",content:e}}};function k(e){var t=e.children,n=e.textNotSupported,i=e.textValidating,r=e.onValidate,c=void 0===r?function(){}:r,d=Object(a.useReducer)(O,w),l=d[0],u=d[1],b=function(e){void 0===e&&(e=500);var t=Object(a.useState)({windowWidth:window.innerWidth,windowHeight:window.innerHeight}),n=t[0],o=t[1];return Object(a.useLayoutEffect)((function(){var t=null;function n(){clearTimeout(t),t=setTimeout((function(){o({windowWidth:window.innerWidth,windowHeight:window.innerHeight})}),e)}return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),n}(),m=Object(a.useCallback)((function(e){u(S.set(e))}),[u]);return Object(a.useEffect)((function(){m(b)}),[m,b]),o.a.createElement(E.Provider,{value:s({},l,{textNotSupported:n||l.textNotSupported,textValidating:i||l.textValidating,onValidate:c,dispatch:u,setter:m})},t)}n(14);function L(){var e=["boleto","barcode"],t="example_tabs",n=Object(a.useState)(e[0]),i=Object(d.a)(n,2),r=i[0],l=i[1],u=Object(a.useState)(null),s=Object(d.a)(u,2),b=s[0],m=s[1],v=Object(a.useState)(null),p=Object(d.a)(v,2),f=p[0],h=p[1],w=Object(a.useState)(!1),E=Object(d.a)(w,2),O=E[0],j=E[1],x=Object(a.useState)(0),y=Object(d.a)(x,2),S=y[0],L=y[1],W=Object(a.useCallback)((function(){m(null),h(null),j(!1)}),[]),D=Object(a.useCallback)((function(){m(null),h(null),j(!0)}),[]),N=Object(a.useCallback)((function(){W()}),[W]),H=Object(a.useCallback)((function(e){j(!1);var t=e.barcode,n=e.banks,a=e.expired,o=e.expiredDays,i=e.expirationDate,r=e.prettyAmount,c=e.type;window.confirm("Estes s\xe3o os dados do boleto? ".toUpperCase()+"\n\nTipo: \n".concat(c," ")+"\n\nBanco: \n".concat(n," ")+"\n\nValor: \n".concat(r," ")+"\n\nVencimento: \n".concat(i)+"\n\nVencido: \n".concat(a?"SIM":"N\xc3O")+"\n\nDias Vencido: \n".concat(o)+"\n\nC\xf3digo de Barras: \n".concat(t)+'\n(\xc9 diferente do n\xfamero impresso no boleto, o chamado "linha digit\xe1vel")')?(j(!1),m(e)):j(!0)}),[]),I=Object(a.useCallback)((function(e,t){j(!1),window.confirm("It's the correct code? ".toUpperCase()+"\n\n".concat(t," "))?(j(!1),h(Object(c.a)({code:t},e))):j(!0)}),[]),T=Object(a.useCallback)((function(e){r!==e&&(W(),l(e))}),[W,r]),z=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.getElementById(e);return t&&t.offsetHeight?t.offsetHeight:0}),[]);return Object(a.useLayoutEffect)((function(){function e(){var e=z(t),n=z("example_header");L("".concat(window.innerHeight-(e+n),"px"))}return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[z]),o.a.createElement("main",null,o.a.createElement("header",{id:"example_header",className:"header"},o.a.createElement("h1",null,"Ler c\xf3digo de barras de boleto")),o.a.createElement("section",null,o.a.createElement("div",{id:t,className:"tabs"},e.map((function(e){return o.a.createElement("button",{type:"button",id:"".concat(t,"_btn_").concat(e),key:"".concat(t,"_btn_").concat(e),className:"btn ".concat(e===r?" active":""),onClick:function(){return T(e)},disabled:r===e},e)}))),o.a.createElement(k,null,o.a.createElement(_,null,O?o.a.createElement("div",{id:"readers"},"boleto"===r&&o.a.createElement("div",{id:"".concat(t,"_reader_boleto")},o.a.createElement(C,{height:S,onCancel:N,onDetected:H})),"barcode"===r&&o.a.createElement("div",{id:"".concat(t,"_reader_barcode")},o.a.createElement(g,{height:S,onCancel:N,onDetected:I}))):b||f?o.a.createElement("article",{id:"result"},o.a.createElement("pre",{dangerouslySetInnerHTML:{__html:JSON.stringify(b||f||{}).replace(/{/g,"{<br />  ").replace(/":/g,'": ').replace(/,"/g,',<br />  "').replace(/}/g,"<br />}")}}),o.a.createElement("footer",{id:"result_footer"},o.a.createElement("button",{type:"button",className:"btn",onClick:D},"Read Again"))):o.a.createElement("article",{id:"start"},o.a.createElement("button",{type:"button",className:"btn",onClick:D},"Come\xe7ar Leitura"))))))}r.a.render(o.a.createElement(L,null),document.getElementById("root"))},3:function(e,t,n){},7:function(e,t,n){e.exports=n(15)}},[[7,1,2]]]);
//# sourceMappingURL=main.d93ca74c.chunk.js.map