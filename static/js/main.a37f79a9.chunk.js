(this["webpackJsonpreact-boleto-reader-example"]=this["webpackJsonpreact-boleto-reader-example"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);n(4);var a=n(0),i=n.n(a),o=n(5),r=n.n(o),c=n(3),d=n(2),l=n(7),s=n(1),u=n(6),b={rbr:"_styles-module__rbr__3P2z6",rbr__overlay:"_styles-module__rbr__overlay__3zAgT",rbr__overlay__item:"_styles-module__rbr__overlay__item__1aS6C",rbr__overlay__line:"_styles-module__rbr__overlay__line__rgsT9"};function v(e){var t=e.id,n=void 0===t?"react-boleto-reader--barcode":t,o=e.init,r=void 0===o?{}:o,l=e.inputStream,u=void 0===l?{}:l,v=e.decoder,m=void 0===v?{}:v,p=e.readers,f=void 0===p?[{format:"ean_reader",config:{}},{format:"code_128_reader",config:{}}]:p,h=e.height,g=void 0===h?window.innerHeight:h,_=e.canvasWidth,w=void 0===_?1280:_,O=e.canvasHeight,j=void 0===O?720:O,E=e.aspectRatio,x=void 0===E?{min:0,max:1}:E,y=e.onInit,C=void 0===y?function(){}:y,S=e.onError,W=void 0===S?function(){}:S,D=e.onDetected,k=void 0===D?function(){}:D,L=e.onCancel,N=void 0===L?function(){}:L,H=e.onProcessed,I=void 0===H?function(){}:H,z=e.svgDetectingBoxesCoords,R=void 0===z?{x:0,y:1}:z,T=e.svgDetectingBoxes,V=void 0===T?{color:"rgba(255, 0, 0, .25)",lineWidth:2}:T,B=e.svgDetectingBox,P=void 0===B?{color:"transparent",lineWidth:2}:B,A=e.svgDetectingLine,M=void 0===A?{color:"rgb(255, 0, 0, .8)",lineWidth:4}:A,q=e.textHeader,J=void 0===q?"Com boa ilumina\xe7\xe3o, posicione o c\xf3digo de barras na \xe1rea retangular:":q,U=e.textButton,F=void 0===U?"Cancelar":U,G=Object(a.useState)(window.innerWidth),K=Object(d.a)(G,2),Q=K[0],X=K[1],Y=Object(a.useState)(null),Z=Object(d.a)(Y,2),$=Z[0],ee=Z[1],te=Object(a.useState)(!0),ne=Object(d.a)(te,2),ae=ne[0],ie=ne[1],oe=parseInt(g,10),re=oe/2,ce=j/2,de=ce-parseInt(g,10)/2,le=oe>j?"".concat(re-ce,"px"):"-".concat(de-40,"px"),se=Object(a.useCallback)((function(){try{Object(s.init)(Object(c.a)(Object(c.a)({inputStream:Object(c.a)({type:"LiveStream",target:"#".concat(n),constraints:{width:w,height:j,facingMode:"environment",aspectRatio:x}},u),frequency:5,singleChannel:!0,locate:!0,locator:{patchSize:"medium",halfSample:!0}},r),{},{decoder:Object(c.a)({readers:f},m)}),(function(e){if(e)return W(e),void console.error(e);Object(s.start)(),C()})),Object(s.onDetected)((function(e){var t=(e||{}).codeResult.code;k(e,t)})),Object(s.onProcessed)((function(e){if(I(e),(!!V||P||M)&&e&&"object"===typeof e){var t=s.canvas.ctx.overlay,n=s.canvas.dom.overlay,a=e.box,i=e.boxes,o=e.codeResult,r=e.line,c=(o||{}).code;i&&V&&(t.clearRect(0,0,parseInt(n.getAttribute("width")),parseInt(n.getAttribute("height"))),i.filter((function(e){return e!==a})).forEach((function(e){s.ImageDebug.drawPath(e,R,t,V)}))),a&&P&&s.ImageDebug.drawPath(a,{x:0,y:1},t,P),c&&M&&s.ImageDebug.drawPath(r,{x:"x",y:"y"},t,M)}}))}catch(e){W(e)}}),[C,k,I,W]),ue=Object(a.useCallback)((function(){Object(s.offDetected)(),Object(s.offProcessed)(),Object(s.stop)()}),[]),be=Object(a.useCallback)((function(){clearTimeout($),Q!==window.innerWidth&&(ue(),ee(setTimeout((function(){se(),X(window.innerWidth)}),1500)))}),[se,ue,Q]),ve=Object(a.useCallback)((function(){N(),Object(s.stop)(),setTimeout((function(){return ie(!1)}),2e3)}),[N,ue,se]);return Object(a.useLayoutEffect)((function(){return se(),window.addEventListener("resize",be),function(){window.removeEventListener("resize",be)}}),[se,be]),ae?i.a.createElement("div",{id:n,className:b.rbr,style:{"--rbr-canvas-top":le,"--rbr-height":g,height:g}},i.a.createElement("div",{className:b.rbr__overlay},i.a.createElement("div",{className:b.rbr__overlay__item},J),i.a.createElement("div",{className:b.rbr__overlay__line},i.a.createElement("hr",null)),i.a.createElement("div",{className:b.rbr__overlay__item},i.a.createElement("button",{type:"button",className:b.rbr__btn,onClick:ve},F)))):null}var m={supported:!0,textLandscape:" Coloque este dispositivo em posi\xe7\xe3o horizontal. <br/><br/> Esta tela possui largura de #wWidth, o que \xe9 insuficiente para realizar a leitura do c\xf3digo de barras de boletos. <br/> <br/> Se ainda assim n\xe3o funcionar, utilize outro dispositivo com resolu\xe7\xe3o superior a #minWidth.",textNotSupported:" Aparentemente este dispositivo n\xe3o tem suporte a c\xe2mera ou o uso dela foi negado, <br /> o qu\xea impossibilita a leitura de c\xf3digos de barras. ",textValidating:" Buscando por dispositivo de v\xeddeo... ",validating:!0,windowHeight:window.innerHeight,windowWidth:window.innerWidth},p=Object(a.createContext)(m);function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,a=t.content;switch(n){case"set":return Object(c.a)(Object(c.a)({},e),a||{});default:return e}}function h(){return Object(a.useContext)(p)}var g="_index__rbr__segment__1WWFP";function _(e){var t=e.children,n=e.height,a=e.minWidth,o=void 0===a?640:a,r=e.textLandscape,c=h(),d=c.windowWidth,l=c.textLandscape;return d<o?i.a.createElement("div",{className:g,dangerouslySetInnerHTML:{__html:String(r||l).replace("#minWidth","".concat(o," pixels")).replace("#wWidth","".concat(d," pixels"))},style:{"--rbr-height":n}}):t}function w(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(t,n){try{if(!e||!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return void n();navigator.mediaDevices.enumerateDevices().catch(n).then((function(a){var i=a.filter((function(t){return t.kind===e})).pop()||null;i?t(i):n()}))}catch(a){n(a)}}))}("videoinput")}function O(e){var t=e.id,n=void 0===t?"react-boleto-reader":t,o=e.readers,r=void 0===o?["i2of5_reader"]:o,c=e.height,d=e.minWidth,s=void 0===d?640:d,b=e.aspectRatio,m=void 0===b?{min:1,max:2}:b,p=e.onDetected,f=void 0===p?function(){}:p,h=e.textLandscape,g=void 0===h?"":h,w=Object(l.a)(e,["id","readers","height","minWidth","aspectRatio","onDetected","textLandscape"]),O=Object(a.useCallback)((function(e,t){var n=function(e){var t=new u.a(String(e));return t&&t.valid()?t.toJSON():null}(t);n&&f(n,t,e)}),[]);return i.a.createElement(_,{height:c,minWidth:s,textLandscape:g},i.a.createElement(v,Object.assign({id:n,height:c||wHeight,readers:r,aspectRatio:m,onDetected:O},w)))}var j={set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:"set",content:e}}};function E(e){var t=e.children,n=h(),o=n.setter,r=n.onValidate,c=n.validating,d=n.supported,l=n.textNotSupported,s=n.textValidating;return Object(a.useEffect)((function(){o({supported:null,validating:!0}),w().then((function(e){o({supported:e||null,validating:!1}),r(e||null)})).catch((function(e){o({supported:null,validating:!0}),r(null,e),console.error(e)}))}),[]),!c&&d?t:i.a.createElement("div",{id:"rbr_support",className:g},c&&i.a.createElement("div",{id:"rbr_support_validating",dangerouslySetInnerHTML:{__html:s}}),!d&&i.a.createElement("div",{id:"rbr_support_not_supported",dangerouslySetInnerHTML:{__html:l}}))}function x(e){var t=e.children,n=e.textNotSupported,o=e.textValidating,r=e.onValidate,l=void 0===r?function(){}:r,s=Object(a.useReducer)(f,m),u=Object(d.a)(s,2),b=u[0],v=u[1],h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=Object(a.useState)({windowWidth:window.innerWidth,windowHeight:window.innerHeight}),n=Object(d.a)(t,2),i=n[0],o=n[1];return Object(a.useLayoutEffect)((function(){var t=null;function n(){clearTimeout(t),t=setTimeout((function(){o({windowWidth:window.innerWidth,windowHeight:window.innerHeight})}),e)}return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),i}(),g=Object(a.useCallback)((function(e){v(j.set(e))}),[v]);return Object(a.useEffect)((function(){g(h)}),[g,h]),i.a.createElement(p.Provider,{value:Object(c.a)(Object(c.a)({},b),{},{textNotSupported:n||b.textNotSupported,textValidating:o||b.textValidating,onValidate:l,dispatch:v,setter:g})},i.a.createElement(E,null,t))}n(15);function y(){var e=["boleto","barcode"],t="example_tabs",n=Object(a.useState)(e[0]),o=Object(d.a)(n,2),r=o[0],l=o[1],s=Object(a.useState)(null),u=Object(d.a)(s,2),b=u[0],m=u[1],p=Object(a.useState)(null),f=Object(d.a)(p,2),h=f[0],g=f[1],_=Object(a.useState)(!1),w=Object(d.a)(_,2),j=w[0],E=w[1],y=Object(a.useState)(0),C=Object(d.a)(y,2),S=C[0],W=C[1],D=Object(a.useCallback)((function(){m(null),g(null),E(!1)}),[]),k=Object(a.useCallback)((function(){m(null),g(null),E(!0)}),[]),L=Object(a.useCallback)((function(){D()}),[D]),N=Object(a.useCallback)((function(e){E(!1);var t=e.barcode,n=e.banks,a=e.expired,i=e.expiredDays,o=e.expirationDate,r=e.prettyAmount,c=e.type;window.confirm("Estes s\xe3o os dados do boleto? ".toUpperCase()+"\n\nTipo: \n".concat(c," ")+"\n\nBanco: \n".concat(n," ")+"\n\nValor: \n".concat(r," ")+"\n\nVencimento: \n".concat(o)+"\n\nVencido: \n".concat(a?"SIM":"N\xc3O")+"\n\nDias Vencido: \n".concat(i)+"\n\nC\xf3digo de Barras: \n".concat(t)+'\n(\xc9 diferente do n\xfamero impresso no boleto, o chamado "linha digit\xe1vel")')?(E(!1),m(e)):E(!0)}),[]),H=Object(a.useCallback)((function(e,t){E(!1),window.confirm("Is the correct code? ".toUpperCase()+"\n\n".concat(t," "))?(E(!1),g(Object(c.a)({code:t},e))):E(!0)}),[]),I=Object(a.useCallback)((function(e){r!==e&&(D(),l(e))}),[D,r]),z=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.getElementById(e);return t&&t.offsetHeight?t.offsetHeight:0}),[]);return Object(a.useLayoutEffect)((function(){function e(){var e=z(t),n=z("example_header");W("".concat(window.innerHeight-(e+n),"px"))}return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[z]),i.a.createElement("main",null,i.a.createElement("header",{id:"example_header",className:"header"},i.a.createElement("h1",null,"Barcode Reader")),i.a.createElement("section",null,i.a.createElement("div",{id:t,className:"tabs"},e.map((function(e){return i.a.createElement("button",{type:"button",id:"".concat(t,"_btn_").concat(e),key:"".concat(t,"_btn_").concat(e),className:"btn ".concat(e===r?" active":""),onClick:function(){return I(e)},disabled:r===e},e)}))),i.a.createElement(x,null,j?i.a.createElement("div",{id:"readers"},"boleto"===r&&i.a.createElement("div",{id:"".concat(t,"_reader_boleto")},i.a.createElement(O,{height:S,onCancel:L,onDetected:N})),"barcode"===r&&i.a.createElement("div",{id:"".concat(t,"_reader_barcode")},i.a.createElement(v,{height:S,onCancel:L,onDetected:H}))):b||h?i.a.createElement("article",{id:"result"},i.a.createElement("pre",{dangerouslySetInnerHTML:{__html:JSON.stringify(b||h||{}).replace(/{/g,"{<br />  ").replace(/":/g,'": ').replace(/,"/g,',<br />  "').replace(/}/g,"<br />}")}}),i.a.createElement("footer",{id:"result_footer"},i.a.createElement("button",{type:"button",className:"btn",onClick:k},"Read Again"))):i.a.createElement("article",{id:"start"},i.a.createElement("button",{type:"button",className:"btn",onClick:k},"Start Reading")))))}r.a.render(i.a.createElement(y,null),document.getElementById("root"))},4:function(e,t,n){},8:function(e,t,n){e.exports=n(16)}},[[8,1,2]]]);
//# sourceMappingURL=main.a37f79a9.chunk.js.map