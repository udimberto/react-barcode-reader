{"version":3,"sources":["../../src/components/BarcodeReader/BarcodeReader.jsx","../../src/provider/context.js","../../src/provider/reducer.js","../../src/provider/hooks.js","../../src/components/RequireLandscape/RequireLandscape.jsx","../../src/utilities/device.js","../../src/components/BoletoBarcodeReader/BoletoBarcodeReader.jsx","../../src/utilities/boleto.js","../../src/components/BoletoBarcodeReaderSupport/BoletoBarcodeReaderSupport.jsx","../../src/provider/actions.js","../../src/provider/BoletoBarcodeReaderProvider.js","App.js","index.js"],"names":["BarcodeReader","id","init","inputStream","decoder","readers","format","config","height","window","innerHeight","canvasWidth","canvasHeight","aspectRatio","min","max","onInit","onError","onDetected","onCancel","onProcessed","svgDetectingBoxesCoords","x","y","svgDetectingBoxes","color","lineWidth","svgDetectingBox","svgDetectingLine","textHeader","textCancel","useState","compareWidth","setCompare","resizing","setResizing","reading","setReading","videoHeight","parseInt","videoHeightHalf","canvasHeightHalf","canvasY","canvasTop","run","useCallback","quaggaInit","type","target","constraints","width","facingMode","frequency","singleChannel","locate","locator","patchSize","halfSample","console","quaggaStart","quaggaOnDetected","code","result","quaggaOnProcessed","drawingCtx","quaggaCanvas","drawingCanvas","guideBox","guideBoxes","codeResult","guideLine","readedCode","guideBoxItem","quaggaImageDebug","error","cameraOff","document","tracks","track","e","stop","quaggaOffDetected","quaggaOffProcessed","quaggaStop","handleScreenResize","clearTimeout","setTimeout","handleCancel","useLayoutEffect","className","styles","style","genericStyles","onClick","boletoReaderDefaultState","supported","textLandscape","textNotSupported","textValidating","validating","windowHeight","windowWidth","innerWidth","BoletoReaderContext","createContext","boletoReaderReducer","state","action","content","useBoletoReader","useContext","RequireLandscape","children","minWidth","textFromContext","dangerouslySetInnerHTML","__html","String","marginTop","getCamera","deviceKind","Promise","navigator","reject","foundDevice","devices","device","resolve","BoletoBarcodeReader","landscape","props","Wrapper","wrapperProps","handleDetected","boleto","barcodeTyped","getBoletoByCode","BoletoBarcodeReaderSupport","setter","onValidate","useEffect","cameraDevice","boletoReaderActions","set","BoletoBarcodeReaderProvider","useReducer","dispatch","windowSizes","delay","sizes","setSizes","resizeDelay","useWindowSizes","value","App","tabs","tabsId","tab","setTab","setBoleto","barcode","setBarcode","readersHeight","setReadersHeight","reset","restart","onDetectBoleto","detectedBoleto","banks","expired","expiredDays","expirationDate","prettyAmount","confirm","toUpperCase","onDetectBarcode","selectTab","tabName","getElementHeight","elementId","element","getElementById","offsetHeight","calcReaderHeight","tabsHeight","headerHeight","addEventListener","removeEventListener","map","key","disabled","JSON","stringify","replace","ReactDOM","render"],"mappings":"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","file":"static/js/main.d93ca74c.chunk.js","sourcesContent":["import React, { useCallback, useLayoutEffect, useState } from 'react'\nimport {\n  init as quaggaInit,\n  start as quaggaStart,\n  stop as quaggaStop,\n  canvas as quaggaCanvas,\n  ImageDebug as quaggaImageDebug,\n  onDetected as quaggaOnDetected,\n  onProcessed as quaggaOnProcessed,\n  offProcessed as quaggaOffProcessed,\n  offDetected as quaggaOffDetected\n} from '@ericblade/quagga2'\nimport genericStyles from '../../css/index.css'\nimport styles from './styles.module.css'\n\nexport function BarcodeReader({\n  id = 'react-boleto-reader--barcode',\n  init = {},\n  inputStream = {},\n  decoder = {},\n  readers = [\n    { format: 'ean_reader', config: {} },\n    { format: 'code_128_reader', config: {} }\n  ],\n  height = window.innerHeight,\n  canvasWidth = 1280,\n  canvasHeight = 720,\n  aspectRatio = {\n    min: 0,\n    max: 1\n  },\n  onInit = () => {},\n  onError = () => {},\n  onDetected = () => {},\n  onCancel = () => {},\n  onProcessed = () => {},\n  svgDetectingBoxesCoords = {\n    x: 0,\n    y: 1\n  },\n  svgDetectingBoxes = {\n    color: 'rgba(255, 0, 0, .25)',\n    lineWidth: 2\n  },\n  svgDetectingBox = {\n    color: 'transparent',\n    lineWidth: 2\n  },\n  svgDetectingLine = {\n    color: 'rgb(255, 0, 0, .8)',\n    lineWidth: 4\n  },\n  textHeader = 'Com boa iluminação, posicione o código de barras na área delimitada:',\n  textCancel = 'Cancelar'\n}) {\n  const [compareWidth, setCompare] = useState(window.innerWidth)\n  const [resizing, setResizing] = useState(null)\n  const [reading, setReading] = useState(true)\n  const videoHeight = parseInt(height, 10)\n  const videoHeightHalf = videoHeight / 2\n  const canvasHeightHalf = canvasHeight / 2\n  const canvasY = canvasHeightHalf - parseInt(height, 10) / 2\n  const canvasTop =\n    videoHeight > canvasHeight\n      ? `${videoHeightHalf - canvasHeightHalf}px`\n      : `-${canvasY - 40}px`\n\n  /**\n   * Initialize Quagga2 and set the listeners\n   */\n  const run = useCallback(() => {\n    try {\n      quaggaInit(\n        {\n          inputStream: {\n            type: 'LiveStream',\n            target: `#${id}`,\n            constraints: {\n              width: canvasWidth,\n              height: canvasHeight,\n              facingMode: 'environment',\n              aspectRatio\n            },\n            ...inputStream\n          },\n          frequency: 5,\n          singleChannel: true,\n          locate: true,\n          locator: {\n            patchSize: 'medium',\n            halfSample: true\n          },\n          ...init,\n          decoder: {\n            readers,\n            ...decoder\n          }\n        },\n        (err) => {\n          if (err) {\n            onError(err)\n            console.error(err)\n            return\n          }\n\n          quaggaStart()\n          onInit()\n        }\n      )\n\n      quaggaOnDetected((result) => {\n        const {\n          codeResult: { code }\n        } = result || {}\n\n        onDetected(result, code)\n      })\n\n      quaggaOnProcessed((result) => {\n        onProcessed(result)\n\n        const shouldDrawGuides =\n          !!svgDetectingBoxes || svgDetectingBox || svgDetectingLine\n\n        if (!shouldDrawGuides || !result || typeof result !== 'object') {\n          return\n        }\n\n        const drawingCtx = quaggaCanvas.ctx.overlay\n        const drawingCanvas = quaggaCanvas.dom.overlay\n        const {\n          box: guideBox,\n          boxes: guideBoxes,\n          codeResult,\n          line: guideLine\n        } = result\n        const { code: readedCode } = codeResult || {}\n\n        if (guideBoxes && svgDetectingBoxes) {\n          drawingCtx.clearRect(\n            0,\n            0,\n            parseInt(drawingCanvas.getAttribute('width')),\n            parseInt(drawingCanvas.getAttribute('height'))\n          )\n\n          guideBoxes\n            .filter((guideBoxItem) => guideBoxItem !== guideBox)\n            .forEach((guideBoxItem) => {\n              quaggaImageDebug.drawPath(\n                guideBoxItem,\n                svgDetectingBoxesCoords,\n                drawingCtx,\n                svgDetectingBoxes\n              )\n            })\n        }\n\n        if (guideBox && svgDetectingBox) {\n          quaggaImageDebug.drawPath(\n            guideBox,\n            { x: 0, y: 1 },\n            drawingCtx,\n            svgDetectingBox\n          )\n        }\n\n        if (readedCode && svgDetectingLine) {\n          quaggaImageDebug.drawPath(\n            guideLine,\n            { x: 'x', y: 'y' },\n            drawingCtx,\n            svgDetectingLine\n          )\n        }\n      })\n    } catch (error) {\n      onError(error)\n    }\n  }, [onInit, onDetected, onProcessed, onError])\n\n  /**\n   * Turn camera off\n   */\n  const cameraOff = useCallback(() => {\n    try {\n      const video = document.querySelector('video')\n      const mediaStream = video.srcObject\n      const tracks = mediaStream.getTracks()\n\n      tracks.forEach(track => track.stop())\n    } catch (e) {\n      console.error('BoletoBarcodeReader could not stop the camera',)\n    }\n  })\n\n  /**\n   * Stop the party\n   */\n  const stop = useCallback(() => {\n    quaggaOffDetected()\n    quaggaOffProcessed()\n    quaggaStop()\n    cameraOff()\n  }, [])\n\n  /**\n   * Listener to screen resize, restarting the reader\n   */\n  const handleScreenResize = useCallback(() => {\n    clearTimeout(resizing)\n\n    if (compareWidth === window.innerWidth) {\n      return\n    }\n\n    stop()\n    setResizing(\n      setTimeout(() => {\n        run()\n        setCompare(window.innerWidth)\n      }, 1500)\n    )\n  }, [run, stop, compareWidth])\n\n  /**\n   * User cancel callback\n   */\n  const handleCancel = useCallback(() => {\n    onCancel()\n    quaggaStop()\n    setTimeout(() => setReading(false), 2000)\n  }, [onCancel, stop, run])\n\n  /**\n   * Start the party at the first component render call\n   */\n  useLayoutEffect(() => {\n    run()\n    window.addEventListener('resize', handleScreenResize)\n\n    /**\n     * Unmount\n     */\n    return () => {\n      window.removeEventListener('resize', handleScreenResize)\n    }\n  }, [run, handleScreenResize])\n\n  return !reading ? null : (\n    <div\n      id={id}\n      className={styles.rbr}\n      style={{\n        '--rbr-canvas-top': canvasTop,\n        '--rbr-height': height,\n        height\n      }}\n    >\n      <div className={styles.rbr__overlay}>\n        <div className={styles.rbr__overlay__item}>\n          <small>\n            {textHeader}\n          </small>\n        </div>\n        <div className={styles.rbr__overlay__line}>\n          <hr />\n        </div>\n        <div className={styles.rbr__overlay__item}>\n          <button\n            type='button'\n            className={`${genericStyles.rbr__btn} rbr__btn`}\n            onClick={handleCancel}\n          >\n            {textCancel}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import { createContext } from 'react'\n\nexport const boletoReaderDefaultState = {\n  supported: true,\n  textLandscape: ' Largura de tela insuficiente. <br/><br/> Coloque o dispositivo em posição horizontal ou maximize a janela. <br/><br/> Se ainda assim não funcionar, utilize outro dispositivo com resolução superior a #minWidth. <br/><br/> Esta janela atualmente tem largura de #wWidth.',\n  textNotSupported: ' Aparentemente este dispositivo não tem suporte a câmera ou o uso dela foi negado, <br /> o quê impossibilita a leitura de códigos de barras. ',\n  textValidating: ' Buscando por dispositivo de vídeo... ',\n  validating: true,\n  windowHeight: window.innerHeight,\n  windowWidth: window.innerWidth,\n}\n\nexport const BoletoReaderContext = createContext(boletoReaderDefaultState)\n","import { boletoReaderDefaultState } from './context'\n\nexport function boletoReaderReducer(state = boletoReaderDefaultState, action = {}) {\n  const { type, content } = action\n\n  switch (type) {\n    case 'set':\n      return {\n        ...state,\n        ...(content || {})\n      }\n\n    default:\n      return state\n  }\n}\n","import { useContext, useLayoutEffect, useReducer, useState } from 'react';\nimport { boletoReaderDefaultState, BoletoReaderContext } from './context';\nimport { boletoReaderReducer } from './reducer';\n\nexport function useBoletoReader() {\n  return useContext(BoletoReaderContext);\n}\n\nexport function useBoletoReaderReducer() {\n  return useReducer(boletoReaderReducer, boletoReaderDefaultState);\n}\n\nexport function useWindowSizes(delay = 500) {\n  const [sizes, setSizes] = useState({\n    windowWidth: window.innerWidth,\n    windowHeight: window.innerHeight\n  })\n\n  useLayoutEffect(() => {\n    let resizeDelay = null\n\n    function handleResize() {\n      clearTimeout(resizeDelay)\n\n      resizeDelay = setTimeout(() => {\n        setSizes({\n          windowWidth: window.innerWidth,\n          windowHeight: window.innerHeight\n        })\n      }, delay);\n    }\n\n    window.addEventListener('resize', handleResize)\n\n    return () => {\n      window.removeEventListener('resize', handleResize)\n    }\n  }, [])\n\n  return sizes\n}\n\n","import React from 'react'\nimport { useBoletoReader } from '../../hooks'\nimport styles from '../../css/index.css'\n\nexport function RequireLandscape({\n  children,\n  height,\n  minWidth = 640,\n  onCancel,\n  textLandscape\n}) {\n  const { windowWidth, textLandscape: textFromContext } = useBoletoReader()\n  const requireLargeWidth = windowWidth < minWidth\n\n  return !requireLargeWidth ? children : (\n    <div\n      className={styles.rbr__segment}\n      style={{\n        '--rbr-height': height\n      }}\n    >\n      <div\n        dangerouslySetInnerHTML={{\n          __html: String(textLandscape || textFromContext)\n            .replace('#minWidth', `${minWidth} pixels`)\n            .replace('#wWidth', `${windowWidth} pixels`)\n        }}\n      />\n      {onCancel && (\n        <button\n          type=\"button\"\n          style={{ marginTop: '40px' }}\n          className={styles.rbr__btn}\n          onClick={onCancel}\n        >\n          Cancelar\n        </button>\n      )}\n    </div>\n  )\n}\n","/**\n * Search for device resource.\n * If it's existent and supported by browser.\n *\n * Reminder: Only works to HTTPS connections\n *\n * @param {String} deviceKind\n *\n * @returns {Promise}\n */\nexport function getDevice(deviceKind = '') {\n  return new Promise((resolve, reject) => {\n    try {\n      if (\n        !deviceKind\n        || !navigator.mediaDevices\n        || !navigator.mediaDevices.enumerateDevices\n      ) {\n        reject()\n\n        return\n      }\n\n      navigator.mediaDevices.enumerateDevices()\n        .catch(reject)\n        .then((devices) => {\n          const foundDevice = devices.filter((device) => device.kind === deviceKind).pop() || null\n\n          if (foundDevice) {\n            resolve(foundDevice)\n          } else {\n            reject()\n          }\n        })\n    } catch (e) {\n      reject(e)\n    }\n  })\n}\n\n/**\n * Search for device camera.\n * If it's existent and supported by browser.\n *\n * Reminder: Only works to HTTPS connections\n *\n * @returns {Promise}\n */\nexport function getCamera() {\n  return getDevice('videoinput')\n}\n","import React, { useCallback } from 'react'\nimport { BarcodeReader } from '../BarcodeReader'\nimport { RequireLandscape } from '../RequireLandscape'\nimport { getBoletoByCode } from '../../utilities'\n\nexport function BoletoBarcodeReader({\n  id = 'react-boleto-reader',\n  readers = ['i2of5_reader'],\n  height,\n  minWidth = 640,\n  aspectRatio = {\n    min: 1,\n    max: 2\n  },\n  onDetected = () => {},\n  onCancel,\n  landscape = true,\n  textLandscape = '',\n  ...props\n}) {\n  const Wrapper = landscape ? RequireLandscape : Fragment;\n  const wrapperProps = !landscape ? {} : {\n    height: height,\n    minWidth: minWidth,\n    onCancel: onCancel,\n    textLandscape: textLandscape\n  }\n\n  /**\n   * Intercept the readed code, validating if it's a valid boleto.\n   *\n   * @param {Object} result - Quagga lib result data\n   */\n  const handleDetected = useCallback((result, code) => {\n    const boleto = getBoletoByCode(code)\n\n    if (!boleto) {\n      return\n    }\n\n    onDetected(boleto, code, result)\n  }, [])\n\n  return (\n    <Wrapper {...wrapperProps}>\n      <BarcodeReader\n        id={id}\n        height={height || wHeight}\n        readers={readers}\n        aspectRatio={aspectRatio}\n        onCancel={onCancel}\n        onDetected={handleDetected}\n        {...props}\n      />\n    </Wrapper>\n  )\n}\n","import { Boleto } from 'broleto'\n\n/**\n * Get boleto data by barcode or line code\n *\n * @param {String} code\n *\n * @returns {Object}\n */\nexport function getBoletoByCode(code) {\n  const boleto = new Boleto(String(code))\n\n  if (!boleto || !boleto.valid()) {\n    return null\n  }\n\n  return {\n    ...boleto.toJSON(),\n    barcodeTyped: code\n  }\n}\n","import React, { useEffect } from 'react'\nimport { useBoletoReader } from '../../hooks'\nimport { getCamera } from '../../utilities'\nimport styles from '../../css/index.css'\n\nexport function BoletoBarcodeReaderSupport({ children }) {\n  const {\n    setter,\n    onValidate,\n    validating,\n    supported,\n    textNotSupported,\n    textValidating\n  } = useBoletoReader()\n\n  useEffect(() => {\n    setter({ supported: null, validating: true })\n\n    getCamera()\n      .then((cameraDevice) => {\n        setter({ supported: cameraDevice || null, validating: false })\n        onValidate(cameraDevice || null)\n      })\n      .catch((error) => {\n        setter({ supported: null, validating: true })\n        onValidate(null, error)\n        console.error(error)\n      })\n  }, [])\n\n  return !validating && supported ? children : (\n    <div\n      id=\"rbr_support\"\n      className={styles.rbr__segment}\n    >\n      {validating && (\n        <div\n          id=\"rbr_support_validating\"\n          dangerouslySetInnerHTML={{ __html: textValidating }}\n        />\n      )}\n      {!supported && (\n        <div\n          id=\"rbr_support_not_supported\"\n          dangerouslySetInnerHTML={{ __html: textNotSupported }}\n        />\n      )}\n    </div>\n  )\n}\n","function set(content = {}) {\n  return { type: 'set', content }\n}\n\nexport const boletoReaderActions = {\n  set\n}\n","import React, { useCallback, useEffect } from 'react';\nimport { boletoReaderActions } from './actions';\nimport { BoletoReaderContext } from './context';\nimport { useBoletoReaderReducer, useWindowSizes } from './hooks';\n\nexport function BoletoBarcodeReaderProvider({\n  children,\n  textNotSupported,\n  textValidating,\n  onValidate = () => {},\n}) {\n  const [state, dispatch] = useBoletoReaderReducer();\n  const windowSizes = useWindowSizes();\n  const setter = useCallback((content) => {\n    dispatch(boletoReaderActions.set(content))\n  }, [dispatch])\n\n  useEffect(() => {\n    setter(windowSizes)\n  }, [setter, windowSizes])\n\n  return (\n    <BoletoReaderContext.Provider\n      value={{\n        ...state,\n        textNotSupported: textNotSupported || state.textNotSupported,\n        textValidating: textValidating || state.textValidating,\n        onValidate,\n        dispatch,\n        setter\n      }}\n    >\n      {children}\n    </BoletoReaderContext.Provider>\n  );\n}\n","import React, { useCallback, useLayoutEffect, useState } from 'react';\n\nimport { BarcodeReader, BoletoBarcodeReader, BoletoBarcodeReaderProvider, BoletoBarcodeReaderSupport } from 'react-boleto-reader';\nimport 'react-boleto-reader/dist/index.css'; /** The default styles. It's optional. */\n\nimport './index.css'; /** Not important: example styles. */\n\nexport default function App() {\n  /** Not important: example definitions */\n  const tabs = [ 'boleto', 'barcode' ];\n  const tabsId = 'example_tabs';\n  const headerId = 'example_header';\n  const [tab, setTab] = useState(tabs[0]);\n  const [boleto, setBoleto] = useState(null);\n  const [barcode, setBarcode] = useState(null);\n  const [reading, setReading] = useState(false);\n  const [readersHeight, setReadersHeight] = useState(0);\n\n  /**\n   * Not important: example stuff\n   */\n  const reset = useCallback(() => {\n    setBoleto(null);\n    setBarcode(null);\n    setReading(false);\n  }, []);\n\n  /**\n   * Not important: example stuff\n   */\n  const restart = useCallback(() => {\n    setBoleto(null);\n    setBarcode(null);\n    setReading(true);\n  }, []);\n\n  /**\n   *\n   */\n  const onCancel = useCallback(() => {\n    reset();\n  }, [reset]);\n\n  /**\n   * Important:\n   *\n   * This is the callback defined to receive boleto data\n   * when the reader have sucesse identifying that big barcode.\n   *\n   * In this example we have the `reading` variable,\n   * who helps to render or not render the BoletoBarcodeReader component.\n   *\n   * You don't need to do like this.\n   *\n   * @param {Object} detectedBoleto\n   */\n  const onDetectBoleto = useCallback((detectedBoleto) => {\n    setReading(false);\n\n    const {\n      barcode,\n      banks,\n      expired,\n      expiredDays,\n      expirationDate,\n      prettyAmount,\n      type,\n    } = detectedBoleto;\n\n    const confirmed = window.confirm(\n      'Estes são os dados do boleto? '.toUpperCase()\n      + `\\n\\nTipo: \\n${type} `\n      + `\\n\\nBanco: \\n${banks} `\n      + `\\n\\nValor: \\n${prettyAmount} `\n      + `\\n\\nVencimento: \\n${expirationDate}`\n      + `\\n\\nVencido: \\n${expired ? 'SIM' : 'NÃO'}`\n      + `\\n\\nDias Vencido: \\n${expiredDays}`\n      + `\\n\\nCódigo de Barras: \\n${barcode}`\n      + '\\n(É diferente do número impresso no boleto, o chamado \"linha digitável\")'\n    );\n\n    if (!confirmed) {\n      setReading(true);\n\n      return;\n    }\n\n    setReading(false);\n    setBoleto(detectedBoleto);\n  }, []);\n\n  /**\n   * Important:\n   *\n   * This is the callback defined to receive barcode number\n   * when the reader have sucesse identifying.\n   *\n   * In this example we have the `reading` variable,\n   * who helps to render or not render the BarcodeReader component.\n   *\n   * You don't need to do like this.\n   *\n   * @param {Object} detectedBoleto\n   */\n  const onDetectBarcode = useCallback((result, code) => {\n    setReading(false);\n\n    const confirmed = window.confirm(\n      `It's the correct code? `.toUpperCase()\n      + `\\n\\n${code} `\n    );\n\n    if (!confirmed) {\n      setReading(true);\n\n      return;\n    }\n\n    setReading(false);\n    setBarcode({ code, ...result });\n  }, []);\n\n  /**\n   *\n   * @param {String} tabName\n   */\n  const selectTab = useCallback((tabName) => {\n    if (tab === tabName) {\n      return;\n    }\n\n    reset();\n    setTab(tabName);\n  }, [reset, tab]);\n\n  /**\n   * Not important: example stuff\n   */\n  const getElementHeight = useCallback((elementId = '') => {\n    const element = document.getElementById(elementId);\n\n    return !element || !element.offsetHeight ? 0 : element.offsetHeight;\n  }, []);\n\n  /**\n   * Not important: example stuff\n   */\n  useLayoutEffect(() => {\n    function calcReaderHeight() {\n      const tabsHeight = getElementHeight(tabsId);\n      const headerHeight = getElementHeight(headerId);\n\n      setReadersHeight(`${window.innerHeight - (tabsHeight + headerHeight)}px`);\n    }\n\n    calcReaderHeight();\n\n    window.addEventListener('resize', calcReaderHeight);\n\n    return () => {\n      window.removeEventListener('resize', calcReaderHeight);\n    }\n  }, [getElementHeight]);\n\n  return (\n    <main>\n      <header\n        id={headerId}\n        className=\"header\"\n      >\n        <h1>\n          Ler código de barras de boleto\n        </h1>\n      </header>\n      <section>\n        <div\n          id={tabsId}\n          className=\"tabs\"\n        >\n          {tabs.map((tabName) => (\n            <button\n              type=\"button\"\n              id={`${tabsId}_btn_${tabName}`}\n              key={`${tabsId}_btn_${tabName}`}\n              className={`btn ${tabName === tab ? ' active' : ''}`}\n              onClick={() => selectTab(tabName)}\n              disabled={tab === tabName}\n            >\n              {tabName}\n            </button>\n          ))}\n        </div>\n        <BoletoBarcodeReaderProvider>\n          <BoletoBarcodeReaderSupport>\n            {reading ? (\n              <div id=\"readers\">\n                {tab === 'boleto' && (\n                  <div id={`${tabsId}_reader_boleto`}>\n                    <BoletoBarcodeReader\n                      height={readersHeight}\n                      onCancel={onCancel}\n                      onDetected={onDetectBoleto}\n                    />\n                  </div>\n                )}\n                {tab === 'barcode' && (\n                  <div id={`${tabsId}_reader_barcode`}>\n                    <BarcodeReader\n                      height={readersHeight}\n                      onCancel={onCancel}\n                      onDetected={onDetectBarcode}\n                    />\n                  </div>\n                )}\n              </div>\n            ) : ((!boleto && !barcode) ? (\n              <article id=\"start\">\n                <button\n                  type=\"button\"\n                  className=\"btn\"\n                  onClick={restart}\n                >\n                  Começar Leitura\n                </button>\n              </article>\n            ) : (\n              <article id=\"result\">\n                <pre\n                  dangerouslySetInnerHTML={{\n                    __html: (\n                      JSON\n                        .stringify(boleto || barcode || {})\n                        .replace(/{/g, '{<br />  ')\n                        .replace(/\":/g, '\": ')\n                        .replace(/,\"/g, ',<br />  \"')\n                        .replace(/}/g, '<br />}')\n                    )\n                  }}\n                />\n                <footer id=\"result_footer\">\n                  <button\n                    type=\"button\"\n                    className=\"btn\"\n                    onClick={restart}\n                  >\n                    Read Again\n                  </button>\n                </footer>\n              </article>\n            ))}\n          </BoletoBarcodeReaderSupport>\n        </BoletoBarcodeReaderProvider>\n      </section>\n    </main>\n  )\n}\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}