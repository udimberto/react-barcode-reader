(this["webpackJsonpreact-boleto-reader-example"]=this["webpackJsonpreact-boleto-reader-example"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);n(4);var a=n(0),i=n.n(a),o=n(5),r=n.n(o),c=n(3),d=n(2),l=n(7),s=n(1),u=n(6),b="_styles-module__rbr__3P2z6",m="_styles-module__rbr__overlay__3zAgT",v="_styles-module__rbr__overlay__item__1aS6C",p="_styles-module__rbr__overlay__line__rgsT9",f="_styles-module__rbr__btn__2UdF-";function h(e){var t=e.id,n=void 0===t?"react-boleto-reader--barcode":t,o=e.init,r=void 0===o?{}:o,l=e.inputStream,u=void 0===l?{}:l,h=e.decoder,g=void 0===h?{}:h,_=e.readers,w=void 0===_?[{format:"ean_reader",config:{}},{format:"code_128_reader",config:{}}]:_,j=e.height,O=void 0===j?window.innerHeight:j,E=e.canvasWidth,x=void 0===E?1280:E,y=e.canvasHeight,C=void 0===y?720:y,S=e.aspectRatio,W=void 0===S?{min:0,max:1}:S,D=e.onInit,k=void 0===D?function(){}:D,L=e.onError,N=void 0===L?function(){}:L,H=e.onDetected,I=void 0===H?function(){}:H,z=e.onCancel,R=void 0===z?function(){}:z,T=e.onProcessed,V=void 0===T?function(){}:T,B=e.svgDetectingBoxesCoords,P=void 0===B?{x:0,y:1}:B,A=e.svgDetectingBoxes,M=void 0===A?{color:"rgba(255, 0, 0, .25)",lineWidth:2}:A,J=e.svgDetectingBox,q=void 0===J?{color:"transparent",lineWidth:2}:J,U=e.svgDetectingLine,F=void 0===U?{color:"rgb(255, 0, 0, .8)",lineWidth:4}:U,G=e.textHeader,K=void 0===G?"Com boa ilumina\xe7\xe3o, posicione o c\xf3digo de barras na \xe1rea retangular:":G,Q=e.textButton,X=void 0===Q?"Cancelar":Q,Y=Object(a.useState)(window.innerWidth),Z=Object(d.a)(Y,2),$=Z[0],ee=Z[1],te=Object(a.useState)(null),ne=Object(d.a)(te,2),ae=ne[0],ie=ne[1],oe=Object(a.useState)(!0),re=Object(d.a)(oe,2),ce=re[0],de=re[1],le=parseInt(O,10),se=le/2,ue=C/2,be=ue-parseInt(O,10)/2,me=le>C?"".concat(se-ue,"px"):"-".concat(be-40,"px"),ve=Object(a.useCallback)((function(){try{Object(s.init)(Object(c.a)(Object(c.a)({inputStream:Object(c.a)({type:"LiveStream",target:"#".concat(n),constraints:{width:x,height:C,facingMode:"environment",aspectRatio:W}},u),frequency:5,singleChannel:!0,locate:!0,locator:{patchSize:"medium",halfSample:!0}},r),{},{decoder:Object(c.a)({readers:w},g)}),(function(e){if(e)return N(e),void console.error(e);Object(s.start)(),k()})),Object(s.onDetected)((function(e){var t=(e||{}).codeResult.code;I(e,t)})),Object(s.onProcessed)((function(e){if(V(e),(!!M||q||F)&&e&&"object"===typeof e){var t=s.canvas.ctx.overlay,n=s.canvas.dom.overlay,a=e.box,i=e.boxes,o=e.codeResult,r=e.line,c=(o||{}).code;i&&M&&(t.clearRect(0,0,parseInt(n.getAttribute("width")),parseInt(n.getAttribute("height"))),i.filter((function(e){return e!==a})).forEach((function(e){s.ImageDebug.drawPath(e,P,t,M)}))),a&&q&&s.ImageDebug.drawPath(a,{x:0,y:1},t,q),c&&F&&s.ImageDebug.drawPath(r,{x:"x",y:"y"},t,F)}}))}catch(e){N(e)}}),[k,I,V,N]),pe=Object(a.useCallback)((function(){Object(s.offDetected)(),Object(s.offProcessed)(),Object(s.stop)()}),[]),fe=Object(a.useCallback)((function(){clearTimeout(ae),$!==window.innerWidth&&(pe(),ie(setTimeout((function(){ve(),ee(window.innerWidth)}),1500)))}),[ve,pe,$]),he=Object(a.useCallback)((function(){R(),Object(s.stop)(),setTimeout((function(){return de(!1)}),2e3)}),[R,pe,ve]);return Object(a.useLayoutEffect)((function(){return ve(),window.addEventListener("resize",fe),function(){window.removeEventListener("resize",fe)}}),[ve,fe]),ce?i.a.createElement("div",{id:n,className:b,style:{"--rbr-canvas-top":me,"--rbr-height":O,height:O}},i.a.createElement("div",{className:m},i.a.createElement("div",{className:v},K),i.a.createElement("div",{className:p},i.a.createElement("hr",null)),i.a.createElement("div",{className:v},i.a.createElement("button",{type:"button",className:f,onClick:he},X)))):null}var g={supported:!0,textLandscape:" Largura de tela insuficiente. <br/><br/> Coloque o dispositivo em posi\xe7\xe3o horizontal ou maximize a janela. <br/><br/> Se ainda assim n\xe3o funcionar, utilize outro dispositivo com resolu\xe7\xe3o superior a #minWidth. <br/><br/> Esta janela atualmente tem largura de #wWidth.",textNotSupported:" Aparentemente este dispositivo n\xe3o tem suporte a c\xe2mera ou o uso dela foi negado, <br /> o qu\xea impossibilita a leitura de c\xf3digos de barras. ",textValidating:" Buscando por dispositivo de v\xeddeo... ",validating:!0,windowHeight:window.innerHeight,windowWidth:window.innerWidth},_=Object(a.createContext)(g);function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,a=t.content;switch(n){case"set":return Object(c.a)(Object(c.a)({},e),a||{});default:return e}}function j(){return Object(a.useContext)(_)}var O="_index__rbr__segment__1WWFP";function E(e){var t=e.children,n=e.height,a=e.minWidth,o=void 0===a?640:a,r=e.textLandscape,c=j(),d=c.windowWidth,l=c.textLandscape;return d<o?i.a.createElement("div",{className:O,dangerouslySetInnerHTML:{__html:String(r||l).replace("#minWidth","".concat(o," pixels")).replace("#wWidth","".concat(d," pixels"))},style:{"--rbr-height":n}}):t}function x(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(t,n){try{if(!e||!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return void n();navigator.mediaDevices.enumerateDevices().catch(n).then((function(a){var i=a.filter((function(t){return t.kind===e})).pop()||null;i?t(i):n()}))}catch(a){n(a)}}))}("videoinput")}function y(e){var t=e.id,n=void 0===t?"react-boleto-reader":t,o=e.readers,r=void 0===o?["i2of5_reader"]:o,c=e.height,d=e.minWidth,s=void 0===d?640:d,b=e.aspectRatio,m=void 0===b?{min:1,max:2}:b,v=e.onDetected,p=void 0===v?function(){}:v,f=e.textLandscape,g=void 0===f?"":f,_=Object(l.a)(e,["id","readers","height","minWidth","aspectRatio","onDetected","textLandscape"]),w=Object(a.useCallback)((function(e,t){var n=function(e){var t=new u.a(String(e));return t&&t.valid()?t.toJSON():null}(t);n&&p(n,t,e)}),[]);return i.a.createElement(E,{height:c,minWidth:s,textLandscape:g},i.a.createElement(h,Object.assign({id:n,height:c||wHeight,readers:r,aspectRatio:m,onDetected:w},_)))}var C={set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:"set",content:e}}};function S(e){var t=e.children,n=j(),o=n.setter,r=n.onValidate,c=n.validating,d=n.supported,l=n.textNotSupported,s=n.textValidating;return Object(a.useEffect)((function(){o({supported:null,validating:!0}),x().then((function(e){o({supported:e||null,validating:!1}),r(e||null)})).catch((function(e){o({supported:null,validating:!0}),r(null,e),console.error(e)}))}),[]),!c&&d?t:i.a.createElement("div",{id:"rbr_support",className:O},c&&i.a.createElement("div",{id:"rbr_support_validating",dangerouslySetInnerHTML:{__html:s}}),!d&&i.a.createElement("div",{id:"rbr_support_not_supported",dangerouslySetInnerHTML:{__html:l}}))}function W(e){var t=e.children,n=e.textNotSupported,o=e.textValidating,r=e.onValidate,l=void 0===r?function(){}:r,s=Object(a.useReducer)(w,g),u=Object(d.a)(s,2),b=u[0],m=u[1],v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=Object(a.useState)({windowWidth:window.innerWidth,windowHeight:window.innerHeight}),n=Object(d.a)(t,2),i=n[0],o=n[1];return Object(a.useLayoutEffect)((function(){var t=null;function n(){clearTimeout(t),t=setTimeout((function(){o({windowWidth:window.innerWidth,windowHeight:window.innerHeight})}),e)}return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),i}(),p=Object(a.useCallback)((function(e){m(C.set(e))}),[m]);return Object(a.useEffect)((function(){p(v)}),[p,v]),i.a.createElement(_.Provider,{value:Object(c.a)(Object(c.a)({},b),{},{textNotSupported:n||b.textNotSupported,textValidating:o||b.textValidating,onValidate:l,dispatch:m,setter:p})},i.a.createElement(S,null,t))}n(15);function D(){var e=["boleto","barcode"],t="example_tabs",n=Object(a.useState)(e[0]),o=Object(d.a)(n,2),r=o[0],l=o[1],s=Object(a.useState)(null),u=Object(d.a)(s,2),b=u[0],m=u[1],v=Object(a.useState)(null),p=Object(d.a)(v,2),f=p[0],g=p[1],_=Object(a.useState)(!1),w=Object(d.a)(_,2),j=w[0],O=w[1],E=Object(a.useState)(0),x=Object(d.a)(E,2),C=x[0],S=x[1],D=Object(a.useCallback)((function(){m(null),g(null),O(!1)}),[]),k=Object(a.useCallback)((function(){m(null),g(null),O(!0)}),[]),L=Object(a.useCallback)((function(){D()}),[D]),N=Object(a.useCallback)((function(e){O(!1);var t=e.barcode,n=e.banks,a=e.expired,i=e.expiredDays,o=e.expirationDate,r=e.prettyAmount,c=e.type;window.confirm("Estes s\xe3o os dados do boleto? ".toUpperCase()+"\n\nTipo: \n".concat(c," ")+"\n\nBanco: \n".concat(n," ")+"\n\nValor: \n".concat(r," ")+"\n\nVencimento: \n".concat(o)+"\n\nVencido: \n".concat(a?"SIM":"N\xc3O")+"\n\nDias Vencido: \n".concat(i)+"\n\nC\xf3digo de Barras: \n".concat(t)+'\n(\xc9 diferente do n\xfamero impresso no boleto, o chamado "linha digit\xe1vel")')?(O(!1),m(e)):O(!0)}),[]),H=Object(a.useCallback)((function(e,t){O(!1),window.confirm("Is the correct code? ".toUpperCase()+"\n\n".concat(t," "))?(O(!1),g(Object(c.a)({code:t},e))):O(!0)}),[]),I=Object(a.useCallback)((function(e){r!==e&&(D(),l(e))}),[D,r]),z=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.getElementById(e);return t&&t.offsetHeight?t.offsetHeight:0}),[]);return Object(a.useLayoutEffect)((function(){function e(){var e=z(t),n=z("example_header");S("".concat(window.innerHeight-(e+n),"px"))}return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[z]),i.a.createElement("main",null,i.a.createElement("header",{id:"example_header",className:"header"},i.a.createElement("h1",null,"Barcode Reader")),i.a.createElement("section",null,i.a.createElement("div",{id:t,className:"tabs"},e.map((function(e){return i.a.createElement("button",{type:"button",id:"".concat(t,"_btn_").concat(e),key:"".concat(t,"_btn_").concat(e),className:"btn ".concat(e===r?" active":""),onClick:function(){return I(e)},disabled:r===e},e)}))),i.a.createElement(W,null,j?i.a.createElement("div",{id:"readers"},"boleto"===r&&i.a.createElement("div",{id:"".concat(t,"_reader_boleto")},i.a.createElement(y,{height:C,onCancel:L,onDetected:N})),"barcode"===r&&i.a.createElement("div",{id:"".concat(t,"_reader_barcode")},i.a.createElement(h,{height:C,onCancel:L,onDetected:H}))):b||f?i.a.createElement("article",{id:"result"},i.a.createElement("pre",{dangerouslySetInnerHTML:{__html:JSON.stringify(b||f||{}).replace(/{/g,"{<br />  ").replace(/":/g,'": ').replace(/,"/g,',<br />  "').replace(/}/g,"<br />}")}}),i.a.createElement("footer",{id:"result_footer"},i.a.createElement("button",{type:"button",className:"btn",onClick:k},"Read Again"))):i.a.createElement("article",{id:"start"},i.a.createElement("button",{type:"button",className:"btn",onClick:k},"Start Reading")))))}r.a.render(i.a.createElement(D,null),document.getElementById("root"))},4:function(e,t,n){},8:function(e,t,n){e.exports=n(16)}},[[8,1,2]]]);
//# sourceMappingURL=main.ee236750.chunk.js.map